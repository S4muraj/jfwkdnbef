[null,{"name":"OPIS","temp":"","event-type":"1","actions":[{"info":"3","storage":"1","varName2":"123","name":"Store Bot Client Info"},{"activity":"0","nameText":"Uruchamiam...","url":"","stat":"3","name":"Set Bot Activity"},{"time":"15","measurement":"1","name":"Wait"},{"activity":"0","nameText":"@CHILL#0194","url":"","stat":"0","name":"Set Bot Activity"},{"time":"15","measurement":"1","name":"Wait"},{"activity":"0","nameText":"W≈Ça≈õciciel | mefedron#2115","url":"","stat":"0","name":"Set Bot Activity"},{"time":"15","measurement":"1","name":"Wait"},{"activity":"0","nameText":"Przestrzegaj regulaminu!","url":"","stat":"0","name":"Set Bot Activity"},{"time":"15","measurement":"1","name":"Wait"},{"activity":"2","nameText":"[${tempVars(\"123\")}] serwer√≥w!","url":"","stat":"0","name":"Set Bot Activity"},{"time":"15","measurement":"1","name":"Wait"},{"activity":"0","nameText":"Mi≈Çego dnia! ü§ñ","url":"","stat":"0","name":"Set Bot Activity"},{"time":"15","measurement":"1","name":"Wait"},{"activity":"0","nameText":"Version | 3.0","url":"","stat":"3","name":"Set Bot Activity"},{"time":"15","measurement":"1","name":"Wait"},{"activity":"2","nameText":"CHILL ‚òÅ","url":"","stat":"3","name":"Set Bot Activity"},{"time":"15","measurement":"1","name":"Wait"},{"call":"6","name":"Jump to Action"}],"_id":"CoFNv"},{"name":"opis","temp":"","event-type":"0","_id":"SeuKl","actions":[{"activity":"2","nameText":"@CHILL#0194","url":"","stat":"3","name":"Set Bot Activity"},{"time":"1","measurement":"3","name":"Wait"},{"activity":"2","nameText":"@CHILL#0194","url":"","stat":"3","name":"Set Bot Activity"},{"time":"1","measurement":"3","name":"Wait"},{"call":"1","name":"Jump to Action"}]},{"name":"WelcomeMessage","temp":"","event-type":"4","_id":"PnwnZ","actions":[{"channel":"4","varName":"","message":"Dziƒôkuje za dodanie! \nMoje komendy `.help` mo≈ºesz r√≥wnie≈º mnie oznaczyƒá. ","storage":"0","varName2":"","name":"Send Message"}]},{"name":"LevelingSystem","temp":"msg","event-type":"2","actions":[{"message":"1","varName":"msg","info":"3","storage":"1","varName2":"member","name":"Store Message Info"},{"info":"0","find":"747034730796548096","storage":"1","varName":"kanal","name":"Find Channel"},{"member":"2","varName":"member","info":"2","storage":"1","varName2":"member_username","name":"Store Member Info"},{"member":"2","varName":"member","info":"16","storage":"1","varName2":"member_avatar","name":"Store Member Info"},{"member":"2","varName":"member","dataName":"exp","changeType":"1","value":"1","name":"Control Member Data"},{"member":"2","varName":"member","dataName":"level","defaultVal":"1","storage":"1","varName2":"myLevel","name":"Store Member Data"},{"member":"2","varName":"member","dataName":"exp","comparison":"1","value":"${tempVars(\"myLevel\") * 5}","iftrue":"0","iftrueVal":"","iffalse":"1","iffalseVal":"","name":"Check Member Data"},{"member":"2","varName":"member","dataName":"exp","changeType":"0","value":"0","name":"Control Member Data"},{"member":"2","varName":"member","dataName":"level","changeType":"1","value":"1","name":"Control Member Data"},{"message":"1","varName":"msg","info":"4","storage":"1","varName2":"channel","name":"Store Message Info"},{"member":"2","varName":"member","dataName":"level","defaultVal":"1","storage":"1","varName2":"myLevel","name":"Store Member Data"},{"title":"LEVEL UP!","author":"","color":"GOLD","timestamp":"true","url":"","authorIcon":"","imageUrl":"","thumbUrl":"https://i.imgur.com/BZ3lg7C.gif","storage":"1","varName":"embed","name":"Create Embed Message"},{"storage":"1","varName":"embed","message":"${tempVars(\"member\")} **osiƒÖgnƒÖ≈Çe≈õ poziom:** `${tempVars(\"myLevel\")}`","name":"Set Embed Description"},{"storage":"1","varName":"embed","message":"${tempVars(\"member_username\")}","footerIcon":"${tempVars(\"member_avatar\")}","name":"Set Embed Footer"},{"storage":"1","varName":"embed","channel":"5","varName2":"kanal","storage3":"0","varName3":"","name":"Send Embed Message"}],"_id":"ADutm"},{"name":"LevelingSystem2izimen","temp":"msg","event-type":"2","actions":[{"message":"1","varName":"msg","info":"3","storage":"1","varName2":"member","name":"Store Message Info"},{"info":"0","find":"612741345328496693","storage":"1","varName":"kanal","name":"Find Channel"},{"member":"2","varName":"member","info":"2","storage":"1","varName2":"member_username","name":"Store Member Info"},{"member":"2","varName":"member","info":"16","storage":"1","varName2":"member_avatar","name":"Store Member Info"},{"member":"2","varName":"member","dataName":"exp","changeType":"1","value":"1","name":"Control Member Data"},{"member":"2","varName":"member","dataName":"level","defaultVal":"1","storage":"1","varName2":"myLevel","name":"Store Member Data"},{"member":"2","varName":"member","dataName":"exp","comparison":"1","value":"${tempVars(\"myLevel\") * 5}","iftrue":"0","iftrueVal":"","iffalse":"1","iffalseVal":"","name":"Check Member Data"},{"member":"2","varName":"member","dataName":"exp","changeType":"0","value":"0","name":"Control Member Data"},{"member":"2","varName":"member","dataName":"level","changeType":"1","value":"1","name":"Control Member Data"},{"message":"1","varName":"msg","info":"4","storage":"1","varName2":"channel","name":"Store Message Info"},{"member":"2","varName":"member","dataName":"level","defaultVal":"1","storage":"1","varName2":"myLevel","name":"Store Member Data"},{"channel":"5","varName":"kanal","message":"${tempVars(\"member\")}","storage":"0","varName2":"","name":"Send Message"},{"title":"LEVEL UP!","author":"","color":"GOLD","timestamp":"true","url":"","authorIcon":"","imageUrl":"","thumbUrl":"https://i.imgur.com/BZ3lg7C.gif","storage":"1","varName":"embed","name":"Create Embed Message"},{"storage":"1","varName":"embed","message":"${tempVars(\"member\")} **osiƒÖgnƒÖ≈Çe≈õ poziom:** `${tempVars(\"myLevel\")}`","name":"Set Embed Description"},{"storage":"1","varName":"embed","message":"${tempVars(\"member_username\")}","footerIcon":"${tempVars(\"member_avatar\")}","name":"Set Embed Footer"},{"storage":"1","varName":"embed","channel":"5","varName2":"kanal","storage3":"0","varName3":"","name":"Send Embed Message"}],"_id":"ihzkF"},{"name":"OPIS2","temp":"","event-type":"0","_id":"epxqE","actions":[{"activity":"0","nameText":"Uruchamiam.","url":"","stat":"3","name":"Set Bot Activity"},{"time":"1","measurement":"1","name":"Wait"},{"activity":"0","nameText":"Uruchamiam..","url":"","stat":"3","name":"Set Bot Activity"},{"time":"1","measurement":"1","name":"Wait"},{"activity":"0","nameText":"Uruchamiam...","url":"","stat":"3","name":"Set Bot Activity"},{"time":"5","measurement":"1","name":"Wait"},{"activity":"0","nameText":"W≈ÇƒÖczony!","url":"","stat":"0","name":"Set Bot Activity"},{"time":"10","measurement":"1","name":"Wait"},{"activity":"2","nameText":"W≈Ça≈õciciel | mefedron#2115","url":"","stat":"3","name":"Set Bot Activity"},{"time":"10","measurement":"1","name":"Wait"},{"activity":"0","nameText":"Mi≈Çego dnia! ü§ñ","url":"","stat":"0","name":"Set Bot Activity"},{"time":"10","measurement":"1","name":"Wait"},{"activity":"0","nameText":"Lista komend? | .help","url":"","stat":"0","name":"Set Bot Activity"},{"time":"10","measurement":"1","name":"Wait"},{"activity":"0","nameText":"Version | 3.0.0","url":"","stat":"3","name":"Set Bot Activity"},{"time":"10","measurement":"1","name":"Wait"},{"call":"9","name":"Jump to Action"}]},{"name":"OPIS3","temp":"","event-type":"0","_id":"yJdnu","actions":[{"activity":"0","nameText":"Wczytywanie...","url":"","stat":"3","name":"Set Bot Activity"},{"time":"10","measurement":"1","name":"Wait"},{"activity":"2","nameText":".help","url":"","stat":"3","name":"Set Bot Activity"}]},{"name":"JOIN","temp":"user","event-type":"6","actions":[{"info":"0","find":"767418152958951465","storage":"1","varName":"kanal","name":"Find Channel"},{"server":"0","varName":"","info":"35","storage":"1","varName2":"ktory","name":"Store Server Info"},{"member":"2","varName":"user","info":"16","storage":"1","varName2":"avatar_URL","name":"Store Member Info"},{"channel":"5","varName":"kanal","message":"${tempVars(\"user\")}","storage":"0","varName2":"","name":"Send Message"},{"title":"","author":"","color":"GREEN","timestamp":"true","url":"","authorIcon":"","imageUrl":"","thumbUrl":"${tempVars(\"avatar_URL\")}","storage":"1","varName":"embed","name":"Create Embed Message"},{"storage":"1","varName":"embed","message":"**Witaj ${tempVars(\"user\")}!**\n- Zapoznaj siƒô z <#767417326973747211>\n- Odbierz rangi na <#767418417639850004>\n- ≈ªyczymy mi≈Çej zabawy!\n\nJeste≈õ u nas **${tempVars(\"ktory\")}**, u≈ºytkownikiem.","name":"Set Embed Description"},{"storage":"1","varName":"embed","message":"üí¨","footerIcon":"","name":"Set Embed Footer"},{"storage":"1","varName":"embed","channel":"5","varName2":"kanal","storage3":"0","varName3":"722871902582079503","name":"Send Embed Message"}],"_id":"LOxlG"},{"name":"JOINizimen","temp":"user","event-type":"6","actions":[{"info":"0","find":"612741345328496693","storage":"1","varName":"kanal","name":"Find Channel"},{"server":"0","varName":"","info":"35","storage":"1","varName2":"ktory","name":"Store Server Info"},{"member":"2","varName":"user","info":"16","storage":"1","varName2":"avatar_URL","name":"Store Member Info"},{"channel":"5","varName":"kanal","message":"${tempVars(\"user\")}","storage":"0","varName2":"","name":"Send Message"},{"title":"","author":"","color":"GREEN","timestamp":"true","url":"","authorIcon":"","imageUrl":"","thumbUrl":"${tempVars(\"avatar_URL\")}","storage":"1","varName":"embed","name":"Create Embed Message"},{"storage":"1","varName":"embed","message":"**Witaj ${tempVars(\"user\")}!**\n- Zapoznaj siƒô z <#758080443076575262>\n- Mo≈ºesz zakupiƒá konta premium na <#612790919824932934>\n- ≈ªyczymy mi≈Çej zabawy!\n\nJeste≈õ u nas **${tempVars(\"ktory\")}**, u≈ºytkownikiem.","name":"Set Embed Description"},{"storage":"1","varName":"embed","message":"üí¨","footerIcon":"","name":"Set Embed Footer"},{"storage":"1","varName":"embed","channel":"5","varName2":"kanal","storage3":"0","varName3":"722871902582079503","name":"Send Embed Message"}],"_id":"JwWNo"},{"name":"LEFT","temp":"user","event-type":"7","actions":[{"info":"0","find":"","storage":"1","varName":"kanal","name":"Find Channel"},{"member":"2","varName":"user","info":"16","storage":"1","varName2":"avatar_URL","name":"Store Member Info"},{"title":"","author":"","color":"#ff0000","url":"","authorIcon":"","authorUrl":"","imageUrl":"","thumbUrl":"${tempVars(\"avatar_URL\")}","timestamp":"true","debug":"false","text":"","year":"","month":"","day":"","hour":"","minute":"","second":"","storage":"1","varName":"embed","name":"Create Embed Message"},{"storage":"1","varName":"embed","message":"**Witaj ${tempVars(\"user\")}!**\n- Zapoznaj siƒô z <#722871902582079500>\n- Odbierz rangi na <#722871902582079504>\n- ≈ªyczymy mi≈Çej zabawy!\n\nJeste≈õ u nas **${tempVars(\"ktory\")}**, u≈ºytkownikiem.","name":"Set Embed Description"},{"storage":"1","varName":"embed","message":"üí¨","footerIcon":"","name":"Set Embed Footer"},{"storage":"1","varName":"embed","channel":"5","varName2":"kanal","storage3":"0","varName3":"","iffalse":"0","iffalseVal":"","name":"Send Embed Message"}],"_id":"CkZRF"},{"name":"START_BOT","temp":"","event-type":"0","_id":"QNzbY","actions":[{"info":"0","find":"727986391950164048","storage":"1","varName":"kanal","name":"Find Channel"},{"channel":"5","varName":"kanal","message":"**Bot zosta≈Ç pomy≈õlnie uruchomiony!**\n","storage":"1","varName2":"Message","name":"Send Message"},{"time":"1","measurement":"1","name":"Wait"},{"storage":"1","varName":"Message","message":"Hejo. Biip. Buup. Je≈ºeli chcesz zaprosiƒá znajomych do tego serwera, kliknij jego nazwƒô w lewym g√≥rnym rogu i wybierz ‚ÄûZapro≈õ osoby‚Äù. Biip!","name":"Edit Message"}]},{"name":"reactionStart","temp":"","event-type":"1","_id":"Lwriz","actions":[{"behavior":"3","name":"Run Action Sequence Once"},{"behavior":"0","interpretation":"1","code":"const _this = this;\nconst fs = require('fs');\n\n//Settings\nconst dmUserAfter = true; // Default, can be changed to false\nvar messageSentAdd = 'Pomy≈õlnie dodano role `{rolename}` na serwerze {server}';\nvar messageSentRemove = 'Pomy≈õlnie usuniƒôto role `{rolename}` na serwerze {server}';\n// The only variables that work rn, {rolename} and {server}\n\n\nif(fs.existsSync('./data/reactionRoleData.json')) {\n    fs.readFile('./data/reactionRoleData.json', function read(err, data) {\n        if (err) {\n            throw err;\n        }\n        data = JSON.parse(data)\n    \n        _this.storeValue(data, 3, 'reactionRoleInf', cache);\n    });\n} else {\n    fs.writeFile(\"./data/reactionRoleData.json\", \"{}\", function(err) {\n        if(err) {\n            return console.log(err);\n        }\n    });\n    _this.storeValue({}, 3, 'reactionRoleInf', cache);\n}\n\nclient.on('raw', packet => {\n    if (!['MESSAGE_REACTION_ADD', 'MESSAGE_REACTION_REMOVE'].includes(packet.t)) return;\n    const channel = client.channels.get(packet.d.channel_id);\n    if (channel.messages.has(packet.d.message_id)) return;\n    channel.fetchMessage(packet.d.message_id).then(message => {\n        const emoji = packet.d.emoji.id ? `${packet.d.emoji.name}:${packet.d.emoji.id}` : packet.d.emoji.name;\n        const reaction = message.reactions.get(emoji);\n        const reactionUser = client.users.get(packet.d.user_id);\n        if (reaction) reaction.users.set(packet.d.user_id, reactionUser);\n        if (!reactionUser.bot) {\n            if (packet.t === 'MESSAGE_REACTION_ADD') {\n                client.emit('messageReactionAdd', reaction, reactionUser);\n            }\n            if (packet.t === 'MESSAGE_REACTION_REMOVE') {\n                client.emit('messageReactionRemove', reaction, reactionUser);\n            }\n        }\n    });\n});\n\nclient.on('messageReactionAdd', async function(reaction, user) {\n    if (!user.bot) {\n        const reactionData = globalVars(\"reactionRoleInf\");\n        const reactionGuild = reaction.message.guild;\n        const reactionMessage = reaction.message;\n        if (reactionData.hasOwnProperty(reactionMessage.id)) {\n            var emojiName = reaction.emoji.name;\n            var roleInData = reactionData[reactionMessage.id].filter(re => re[0] == emojiName || re[0].name == emojiName)\n            if (roleInData.length != 0) {\n                var guilduser = await reactionGuild.fetchMember(user);\n                var roleData = roleInData[0][1];\n                var reactionRole = await reactionGuild.roles.get(roleData);\n                if (!guilduser.roles.has(roleData)) {\n                    guilduser.addRole(reactionRole);\n\n                    if (dmUserAfter){guilduser.send(messageSentAdd.replace(\"{rolename}\",`**${reactionRole.name}**`).replace(\"{server}\",`**${reactionGuild.name}**`));}\n                }\n            }\n        }\n    }\n\n});\n\nclient.on('messageReactionRemove', async function(reaction, user) {\n    const reactionData = globalVars(\"reactionRoleInf\");\n    const reactionGuild = reaction.message.guild;\n    const reactionMessage = reaction.message;\n    if (reactionData.hasOwnProperty(reactionMessage.id)) {\n        var emojiName = reaction.emoji.name;\n        var roleInData = reactionData[reactionMessage.id].filter(re => re[0] == emojiName || re[0].name == emojiName)\n        if (roleInData.length != 0) {\n            var guilduser = await reactionGuild.fetchMember(user);\n            var roleData = roleInData[0][1];\n            var reactionRole = await reactionGuild.roles.get(roleData);\n\n            if (guilduser.roles.has(roleData)) {\n                guilduser.removeRole(reactionRole);\n                if (dmUserAfter){guilduser.send(messageSentRemove.replace(\"{rolename}\",`**${reactionRole.name}**`).replace(\"{server}\",`**${reactionGuild.name}**`));}\n            }\n        }\n    }\n});","storage":"0","varName":"","name":"Run Script"}]},{"name":"<center><b><div style=\"color: #ff00e6;\"> ZIEMNAIK</div></center>","temp":"member","event-type":"6","_id":"XxvjW","actions":[]},{"name":"set role permission","temp":"","event-type":"1","_id":"dkawH","actions":[{"server":"0","varName":"","info":"13","storage":"1","varName2":"channel","name":"Store Server Info"},{"info":"1","find":"Muted","storage":"1","varName":"role","name":"Find Role"},{"channel":"3","varName":"channel","role":"3","varName2":"role","permission":"SEND_MESSAGES","state":"2","name":"Set Role Channel Perms"},{"channel":"3","varName":"channel","role":"3","varName2":"role","permission":"ADD_REACTIONS","state":"2","name":"Set Role Channel Perms"},{"channel":"3","varName":"channel","role":"3","varName2":"role","permission":"ATTACH_FILES","state":"2","name":"Set Role Channel Perms"},{"vchannel":"3","varName":"channel","role":"3","varName2":"role","permission":"SPEAK","state":"2","name":"Set Role Voice Channel Perms"},{"vchannel":"3","varName":"channel","role":"3","varName2":"role","permission":"USE_VAD","state":"2","name":"Set Role Voice Channel Perms"}],"restriction":"0"},{"name":"OnInvite","temp":"message","event-type":"2","_id":"uvxat","actions":[{"message":"1","varName":"message","info":"4","storage":"1","varName2":"message.channel","name":"Store Message Info"},{"message":"1","varName":"message","info":"3","storage":"1","varName2":"message.author","name":"Store Message Info"},{"member":"2","varName":"message.author","permission":"ADMINISTRATOR","iftrue":"1","iftrueVal":"","iffalse":"0","iffalseVal":"","name":"Check Member Permissions"},{"message":"1","varName":"message","info":"2","storage":"1","varName2":"message.text","name":"Store Message Info"},{"storage":"1","varName":"message.text","comparison":"5","value":"discord.gg","iftrue":"0","iftrueVal":"","iffalse":"1","iffalseVal":"","name":"Check Variable"},{"storage":"1","varName":"message","name":"Delete Message"},{"channel":"5","varName":"message.channel","message":"Przepraszam! ${tempVars(\"message.author\")}, ale zapraszanie na inne serwery jest zabronione!","storage":"1","varName2":"usun","name":"Send Message"},{"time":"5","measurement":"1","name":"Wait"},{"storage":"1","varName":"usun","reason":"","name":"Delete Message"}]},{"name":"inviteStart","temp":"","event-type":"1","_id":"EqQxg","actions":[{"behavior":"1","interpretation":"1","code":"    // event\n    if (globalVars(\"inviteManagerRanAlready\") == null) {\n        var delay = 1000;\n        var inviteDatabase = {};\n        var checkUpdates = true;\n        var dmOwnerOnMissingPermission = false;\n\n        Actions.storeValue(true, 3, \"inviteManagerRanAlready\", cache);\n\n        const fs = require('fs');\n        const request = require('request');\n\n        if (checkUpdates) {\n            request('https://raw.githubusercontent.com/ItzPike/DBM-Rawdata-Releases/master/Invite%20Manager/versionCheck.json', function(error, response, body) {\n                if (response.statusCode == 200) {\n                    var allVersions = JSON.parse(body);\n\n                    var commandVersions = {};\n                    var eventVersions = {};\n                    var commandKeys = [];\n                    var eventKeys = [];\n\n                    allVersions[\"commands\"].forEach(commandVer => {\n                        commandVersions[commandVer[0]] = commandVer[1];\n                        commandKeys.push(commandVer[0]);\n                    });\n\n                    allVersions[\"events\"].forEach(eventVer => {\n                        eventVersions[eventVer[0]] = eventVer[1];\n                        eventKeys.push(eventVer[0])\n                    })\n\n                    fs.readFile(\"./data/commands.json\", async function(err, data) {\n                        var data = JSON.parse(data);\n\n                        var systemCommands = await data.filter(command => command != null && commandKeys.includes(command[\"_id\"]));\n\n                        for (i = 0; i < systemCommands.length; i++) {\n                            var systemActionFind = await systemCommands[i][\"actions\"].filter(actionInfo => actionInfo.name = \"Run Script\" && actionInfo.code != null);\n\n                            if (systemActionFind.length != 0) {\n                                var versionCheckSplit = systemActionFind[0].code.split(\"VersionCheck:\");\n                                if (versionCheckSplit[1] != null && versionCheckSplit[1] != commandVersions[systemCommands[i][\"_id\"]] && !isNaN(versionCheckSplit[versionCheckSplit.length - 1])) {\n                                    console.log(`[Invite Manager] The command ${systemCommands[i][\"name\"]} needs an update!`)\n                                }\n                            }\n                        }\n                    })\n\n                    fs.readFile(\"./data/events.json\", async function(err, data) {\n                        var data = JSON.parse(data);\n\n                        var systemEvent = await data.filter(event => event != null && eventKeys.includes(event[\"_id\"]));\n                        for (i = 0; i < systemEvent.length; i++) {\n                            var systemEventFind = await systemEvent[i][\"actions\"].filter(actionInfo => actionInfo.name = \"Run Script\" && actionInfo.code != null);\n\n                            if (systemEventFind.length != 0) {\n                                var versionCheckSplit = systemEventFind[0].code.split(\"VersionCheck:\");\n                                if (versionCheckSplit != null && versionCheckSplit[versionCheckSplit.length - 1] != eventVersions[systemEvent[i][\"_id\"]] && !isNaN(versionCheckSplit[versionCheckSplit.length - 1])) {\n                                    console.log(`[Invite Manager] The event ${systemEvent[i][\"name\"]} needs an update!`)\n                                }\n                            }\n                        }\n                    })\n                }\n            });\n        }\n\n        Actions.inviteModifyData = function(userID, guildID, valueChange, invalidReal) {\n            invalidReal = invalidReal;\n            if (invalidReal == 1 || invalidReal == 0) {\n                if (invalidreal == 1) {\n                    invalidReal = \"real\";\n                } else {\n                    invalidReal = \"invalid\";\n                }\n\n                if (!isNaN(valueChange)) {\n\n                    if (!checkProperty(inviterData, guildID)) {\n                        inviterData[guildID] = {};\n                    }\n\n                    if (!checkProperty(inviterData[guildID], userID)) {\n                        inviterData[guildID][userID] = {\n                            \"invites\": [],\n                            \"data\": {\n                                \"real\": 0,\n                                \"invalid\": 0\n                            }\n                        };\n                    }\n\n\n                    inviterData[guildID][userID][\"data\"][invalidReal] += valueChange;\n                    if (inviterData[guildID][userID][\"data\"][invalidReal] < 0) {\n                        inviterData[guildID][userID][\"data\"][invalidReal] = 0;\n                    }\n\n                    writeToData(\"inviteManagerData\", invitePData, \"invitePData\");\n\n                    return \"success\";\n\n                } else {\n                    return \"failed - Invalid value\";\n                }\n            } else {\n                return \"failed - Invalid value change selection\";\n            }\n        }\n\n        Actions.inviteGet = function(userID, guildID, invalidReal) {\n            invalidReal = invalidReal;\n            if (invalidReal == 1 || invalidReal == 0) {\n                if (invalidreal == 1) {\n                    invalidReal = \"real\";\n                } else {\n                    invalidReal = \"invalid\";\n                }\n\n                if (checkProperty(inviterData, guildID) && checkProperty(inviterData[guildID], userID)) {\n                    return inviterData[guildID][userID][\"data\"][invalidReal];\n                } else {\n                    return \"failed - No data found\";\n                }\n            } else {\n                return \"failed - Invalid value change selection\";\n            }\n        }\n\n        Actions.fetchDatabase = function() {\n            return inviteDatabase;\n        }\n\n        client.guilds.cache.forEach(g => {\n            g.fetchInvites().then(guildInvites => {\n                try {\n                    inviteDatabase[g.id] = guildInvites;\n                } catch (error) {\n                    console.log(error);\n                }\n            }).catch(error => {\n                if (dmOwnerOnMissingPermission) {\n                    setTimeout(function() {\n                        g.owner.send(\"Hello!\\n\\nThis bot requires the `MANAGE_GUILD` permission to allow for the invite manager section of the bot to work.\\n\\nIf you do not turn on the permission, the bot cannot track incoming invites!\");\n                    }, delay);\n                    delay += 1000;\n                }\n            })\n        });\n\n        var inviteSettings;\n        var inviteData;\n        var invitePData;\n        var inviterData;\n        var invitedData;\n\n        checkReadFile(\"inviteManagerData\", {\n            \"inviterData\": {},\n            \"invitedData\": {}\n        }, \"invitePData\").then(() => {\n            invitePData = Actions.invitePData;\n            inviterData = Actions.invitePData[\"inviterData\"];\n            invitedData = Actions.invitePData[\"invitedData\"];\n        }).catch();\n\n        checkReadFile(\"inviteManagerSettings\", {}, \"inviteSettings\").then(() => {\n            inviteSettings = Actions.inviteSettings;\n        }).catch();\n\n        checkReadFile(\"inviteManagerInviteData\", {}, \"inviteData\").then(async() => {\n            if (globalVars(\"inviteManagerDataConvertedOnce\") == null) {\n                Files.saveGlobalVariable(\"inviteManagerDataConvertedOnce\", true);\n                inviteData = Actions.inviteData;\n\n                var inviteDataKeys = Object.keys(inviteData);\n\n                var lastInviteKey = inviteDataKeys[inviteDataKeys.length -1];\n\n                for (var key in inviteData) {\n                    if (Array.isArray(inviteData[key])) {\n                        var base = {\n                            \"inviter\": \"0\",\n                            \"codeCreated\": \"0\",\n                            \"uses\": 0,\n                            \"playersTracked\": inviteData[key]\n                        };\n\n                        await client.fetchInvite(key).then(inviteObj => {\n                            base[\"inviter\"] = inviteObj.inviter.id;\n                            base[\"codeCreated\"] = inviteObj.createdAt;\n                            base[\"uses\"] = inviteObj.uses;\n\n                            inviteData[key] = base;\n                        }).catch(error => {\n                            inviteData[key] = base;\n                        })\n                    }\n\n                    if (lastInviteKey == key) {\n                        writeToData(\"inviteManagerInviteData\", inviteData, \"inviteData\");\n                    }\n                }\n\n            } else {\n                inviteData = Actions.inviteData;\n            }\n        }).catch();\n\n        client.on('guildMemberAdd', (member) => {\n            var memberGuild = member.guild;\n            var memberGuildID = memberGuild.id;\n\n            var guildInv = inviteDatabase[memberGuildID];\n            memberGuild.fetchInvites().then(guildInvites => {\n                inviteDatabase[memberGuildID] = guildInvites;\n                const invited = guildInvites.find(i => guildInv.get(i.code).uses < i.uses);\n                \n                if (invited != null) {\n                    client.users.fetch(invited.inviter.id).then(inviter => {\n                        var inviterID = inviter.id.toString();\n                        var invitedID = member.id.toString();\n    \n                        if (!checkProperty(inviteData, invited.code)) {\n                            inviteData[invited.code] = {\n                                \"inviter\": inviterID,\n                                \"codeCreated\": invited[\"createdAt\"],\n                                \"uses\": invited[\"uses\"],\n                                \"playersTracked\": []\n                            };\n                        }\n    \n                        var memInviteDataIndex = inviteData[invited.code][\"playersTracked\"].findIndex(memberN => memberN == member.id);\n                        inviteData[invited.code][\"playersTracked\"][\"uses\"] = invited[\"uses\"];\n                        if (memInviteDataIndex == -1) {\n                            inviteData[invited.code][\"playersTracked\"].push(member.id);\n                        } else {\n                            inviteData[invited.code][\"playersTracked\"].splice(memInviteDataIndex, 1);\n                            inviteData[invited.code][\"playersTracked\"].push(member.id);\n                        }\n    \n                        writeToData(\"inviteManagerInviteData\", inviteData, \"inviteData\");\n    \n    \n                        var memberTime = member.user.createdTimestamp / 1000;\n                        var currentTime = Math.floor(Date.now() / 1000);\n    \n                        var memberAge = Math.floor((currentTime - memberTime) / 86400);\n    \n    \n                        if (!checkProperty(inviterData, memberGuildID)) {\n                            inviterData[memberGuildID] = {};\n                        }\n                        if (!checkProperty(inviterData[memberGuildID], inviterID)) {\n                            inviterData[memberGuildID][inviterID] = {\n                                \"invites\": [],\n                                \"data\": {\n                                    \"real\": 0,\n                                    \"invalid\": 0\n                                }\n                            };\n                        }\n    \n    \n    \n                        if (!checkProperty(invitedData, memberGuildID)) {\n                            invitedData[memberGuildID] = {};\n                        }\n                        if (!checkProperty(invitedData[memberGuildID], invitedID)) {\n                            invitedData[memberGuildID][invitedID] = []\n                        }\n    \n    \n                        var inviterDataFile = inviterData[memberGuildID][inviterID];\n                        var invitedDataFile = invitedData[memberGuildID][invitedID];\n    \n                        for (i = 0; i < inviterDataFile[\"invites\"].length; i++) {\n                            if (inviterDataFile[\"invites\"][i][\"id\"] == invitedID) {\n                                if (inviterDataFile[\"invites\"][i][\"valid\"]) {\n                                    inviterDataFile[\"data\"][\"real\"] -= 1;\n                                } else {\n                                    inviterDataFile[\"data\"][\"invalid\"] -= 1;\n                                }\n                                inviterDataFile[\"invites\"].splice(i, 1);\n                            }\n                        }\n    \n                        inviterDataFile[\"invites\"].push({\n                            \"id\": member.id,\n                            \"time\": currentTime,\n                            \"codeUsed\": invited.code,\n                            \"valid\": true,\n                            \"invalidCause\": \"\"\n                        });\n    \n                        if (checkProperty(inviteSettings, memberGuildID) && inviteSettings[memberGuildID][\"invalidize\"][\"age_check\"][\"enabled\"]) {\n                            if (memberAge >= inviteSettings[memberGuildID][\"invalidize\"][\"age_check\"][\"minimum\"]) {\n                                inviterDataFile[\"data\"][\"real\"] += 1;\n                            } else {\n                                var latestIndex = inviterDataFile[\"invites\"].length - 1;\n                                inviterDataFile[\"invites\"][latestIndex].valid = false;\n                                inviterDataFile[\"invites\"][latestIndex].invalidCause = \"Player did not meet the minimum account age on join.\";\n                                inviterDataFile[\"data\"][\"invalid\"] += 1;\n                            }\n                        } else {\n                            inviterDataFile[\"data\"][\"real\"] += 1;\n                        }\n    \n                        for (i = 0; i < invitedDataFile.length; i++) {\n                            if (invitedDataFile[i] == inviterID) {\n                                invitedDataFile.splice(i, 1);\n                            }\n                        }\n    \n                        invitedDataFile.push(inviterID);\n    \n                        writeToData(\"inviteManagerData\", invitePData, \"invitePData\");\n    \n                        if (checkProperty(inviteSettings, memberGuildID)) {\n                            if (inviteSettings[memberGuildID][\"logging\"][\"enabled\"]) {\n                                var fetchedChannel = memberGuild.channels.cache.get(inviteSettings[memberGuildID][\"logging\"][\"channel\"]);\n    \n                                if (fetchedChannel != null) {\n    \n    \n                                    var guildData = inviterData[memberGuildID];\n                                    var inviteArr = [];\n    \n                                    var objectKeys = Object.keys(guildData);\n    \n                                    sortedItems = \"\";\n                                    for (i = 0; i < objectKeys.length; i++) {\n                                        var keyIndex = objectKeys[i];\n                                        guildData[keyIndex][\"id\"] = keyIndex;\n                                        inviteArr.push(guildData[keyIndex]);\n                                    }\n    \n                                    var sortedArr = inviteArr.sort(function(a, b) {\n                                        return b[\"data\"][\"real\"] - a[\"data\"][\"real\"]\n                                    });\n    \n                                    var leaderboardStanding = sortedArr.findIndex(userData => userData[\"id\"] == inviterID) + 1;\n    \n                                    var format = inviteSettings[memberGuildID][\"logging\"][\"format\"]\n                                    fetchedChannel.send({\n                                        embed: {\n                                            title: `Witamy na ${memberGuild.name}!`,\n                                            description: format.replace('{user1}', `${member}`).replace('{user2}', `${inviter}`).replace('{code}', `${invited.code}`).replace('{uses}', `${invited.uses}`),\n                                            thumbnail: {\n                                                url: member.user.avatarURL(),\n                                            },\n                                            fields: [{\n                                                    name: 'üë§ ZapraszajƒÖcy',\n                                                    value: inviter,\n                                                    inline: true,\n                                                },\n                                                {\n                                                    name: '‚úÖ Prawdziwe zaproszenia',\n                                                    value: inviterDataFile[\"data\"][\"real\"],\n                                                    inline: true,\n                                                },\n                                                {\n                                                    name: 'üèÜ Ranking',\n                                                    value: `#${leaderboardStanding}`,\n                                                    inline: true,\n                                                }\n                                            ],\n                                            \"color\": 0x3CCC87,\n                                            timestamp: new Date()\n                                        }\n                                    });\n                                } else {\n                                    inviteSettings[memberGuildID][\"logging\"][\"enabled\"] = false;\n                                    inviteSettings[memberGuildID][\"logging\"][\"channel\"] = \"0\";\n    \n                                    writeToData(\"inviteManagerSettings\", inviteSettings, \"inviteSettings\");\n                                }\n                            }\n                        }\n    \n                    }).catch(error => {\n                        //\n                    })\n                }\n            }).catch();\n        });\n\n        client.on('guildMemberRemove', async (member) => {\n            var memberGuild = member.guild;\n            var memberGuildID = memberGuild.id;\n\n            if (checkProperty(invitedData, memberGuildID) && checkProperty(invitedData[memberGuildID], member.id) && invitedData[memberGuildID][member.id].length != 0) {\n                var memberInviters = invitedData[memberGuildID][member.id];\n                var inviterDataFile = inviterData[memberGuildID][memberInviters[memberInviters.length - 1]];\n\n                var findInviteIndex = inviterDataFile[\"invites\"].findIndex(inviteMem => inviteMem.id == member.id);\n                if (inviterDataFile[\"invites\"][findInviteIndex][\"valid\"]) {\n                    inviterDataFile[\"invites\"][findInviteIndex][\"valid\"] = false;\n                    inviterDataFile[\"invites\"][findInviteIndex][\"invalidCause\"] = \"User had left the server\";\n\n                    inviterDataFile[\"data\"][\"invalid\"] += 1;\n                    inviterDataFile[\"data\"][\"real\"] -= 1;\n                }\n\n                writeToData(\"inviteManagerData\", invitePData, \"invitePData\");\n            }\n        });\n\n        client.on('guildCreate', (guild) => {\n            guild.fetchInvites(invites => {\n                inviteDatabase[guild.id] = invites;\n            }).catch(error => {\n                if (dmOwnerOnMissingPermission) {\n                    g.owner.send(\"Hello!\\n\\nThis bot requires the `MANAGE_GUILD` permission to allow for the invite manager section of the bot to work.\\n\\nIf you do not turn on the permission, the bot cannot track incoming invites!\");\n                }\n            })\n        });\n\n        client.on('inviteCreate', (invite) => {\n            if (inviteDatabase[invite.guild.id] == null) {\n                inviteDatabase[invite.guild.id] = new Map();\n            }\n            inviteDatabase[invite.guild.id].set(invite.code, invite);\n        })\n\n        function checkReadFile(name, format, dataname) {\n            return new Promise(function(resolve) {\n                if (fs.existsSync(`./data/${name}.json`)) {\n                    fs.readFile(`./data/${name}.json`, function read(err, data) {\n                        if (err) {\n                            throw err;\n                        }\n                        data = JSON.parse(data)\n\n                        Actions[dataname] = data;\n\n                        resolve(data);\n                    });\n                } else {\n                    Actions[dataname] = format;\n                    writeToData(name, format, dataname);\n                    resolve(format);\n                }\n            })\n        }\n\n        function writeToData(name, data, dataname) {\n            fs.writeFile(`./data/${name}.json`, JSON.stringify(data), function(err) {\n                if (err) {\n                    return console.log(err);\n                }\n                Actions[dataname] = data;\n            });\n        }\n\n        function checkProperty(item, check) {\n            if (item[check] == null) {\n                return false;\n            } else {\n                return true;\n            }\n        }\n    }\n\n    // VersionCheck:6","storage":"0","varName":"","name":"Run Script"}]},{"name":"NewEvent","temp":"","event-type":"0","_id":"IbtVa","actions":[]},{"name":"[BOT] Server Join","temp":"","event-type":"4","_id":"uiovD","actions":[{"server":"0","varName":"","info":"2","storage":"1","varName2":"server.name","name":"Store Server Info"},{"server":"0","varName":"","info":"4","storage":"1","varName2":"server.location","name":"Store Server Info"},{"server":"0","varName":"","info":"11","storage":"1","varName2":"server.owner","name":"Store Server Info"},{"server":"0","varName":"","info":"5","storage":"1","varName2":"server.icon","name":"Store Server Info"},{"server":"0","varName":"","info":"1","storage":"1","varName2":"server.id","name":"Store Server Info"},{"server":"0","varName":"","info":"35","storage":"1","varName2":"server.humans","name":"Store Server Info"},{"date":"","info":"2","storage":"1","varName":"join.date","name":"Store Date Info"},{"info":"0","find":"${tempVars(\"server.id\")}","storage":"1","varName":"server.found","name":"Find Server"},{"server":"1","varName":"server.found","name":"Change Server"},{"channel":"2","varName":"","maxUses":"","lifetime":"","tempInvite":"false","unique":"true","storage":"1","varName2":"server.invite","reason":"","name":"Create Invite"},{"title":"","author":"${tempVars(\"servername\")}","color":"${globalVars(\"bot.embed.color\")}","url":"","authorIcon":"","authorUrl":"","imageUrl":"","thumbUrl":"","timestamp":"false","debug":"false","text":"","year":"","month":"","day":"","hour":"","minute":"","second":"","storage":"1","varName":"embed","name":"Create Embed Message"},{"storage":"1","varName":"embed","message":"Server Name: `${tempVars(\"server.name\")}`\nServer ID: `${tempVars(\"server.id\")}`\nServer Owner: `${tempVars(\"server.owner\")}`\nServer Members: `${tempVars(\"server.humans\")}`\nBot Join Date: `${tempVars(\"join.date\")}`\n\nInvite Link: `${tempVars(\"server.invite\")}`\n","name":"Set Embed Description"},{"comment":"Your server ID here","color":"#0000a0","name":"Comment"},{"info":"0","find":"722871902099734550","storage":"1","varName":"kirito.server","name":"Find Server"},{"server":"1","varName":"servere","name":"Change Server"},{"comment":"Channel you want it sent to","color":"#0000ff","name":"Comment"},{"info":"0","find":"722871902875418730","storage":"1","varName":"join.log.channel","name":"Find Channel"},{"storage":"1","varName":"embed","channel":"5","varName2":"chan2","name":"Send Embed Message"}]},{"name":"set role permission","temp":"","event-type":"10","_id":"dkawH","actions":[{"server":"0","varName":"","info":"13","storage":"1","varName2":"channel","name":"Store Server Info"},{"info":"1","find":"Muted","storage":"1","varName":"role","name":"Find Role"},{"channel":"3","varName":"channel","role":"3","varName2":"role","permission":"SEND_MESSAGES","state":"2","name":"Set Role Channel Perms"},{"channel":"3","varName":"channel","role":"3","varName2":"role","permission":"ADD_REACTIONS","state":"2","name":"Set Role Channel Perms"},{"channel":"3","varName":"channel","role":"3","varName2":"role","permission":"ATTACH_FILES","state":"2","name":"Set Role Channel Perms"},{"vchannel":"3","varName":"channel","role":"3","varName2":"role","permission":"SPEAK","state":"2","name":"Set Role Voice Channel Perms"},{"vchannel":"3","varName":"channel","role":"3","varName2":"role","permission":"USE_VAD","state":"2","name":"Set Role Voice Channel Perms"}]}]